{% load mathfilters %}
{% load humanize %}
{% load app_filters %}

<style>

td { text-align: center; padding: 0px 5px; }
table {
  border-collapse: collapse;
}

table, th, td {
  border: 1px solid #999;
  padding: 2px 5px;
}
</style>

<html>
<p><a href="https://github.com/Kivou-2000607/gym-formula/raw/master/js/gym.user.js">install script</a> - <a href="?export=json">export json</a></p>
<table>

  <thead>
      <tr><td colspan="21" style="text-align: center;">
            <span class="step-links">
                {% if trains.has_previous %}
                    <a class="page-link" href="?page=1">&laquo; first</a>
                    <a class="page-link" href="?page={{ trains.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    {{ trains.number }}/{{ trains.paginator.num_pages }}
                </span>

                {% if trains.has_next %}
                    <a class="page-link" href="?page={{ trains.next_page_number }}">next</a>
                    <a class="page-link" href="?page={{ trains.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </span>
          </td>
      </tr>

      <tr>
        <th title="pk">pk</th>
        <th title="id_key">key</th>
        <th title="timestamp">ts</th>
        <th title="time_diff">cache</th>
        <th title="happy_before">h before</th>
        <th title="happy_after">h after</th>
        <th title="happy_delta">h drop</th>
        <th title="energy_used">e</th>
        <th title="stat_type">stat</th>
        <th title="stat_before">stat before</th>
        <th title="stat_after">stat after</th>
        <th title="stat_delta">stat diff</th>
        <th title="error">error</th>
        <th title="gym_id">gym id</th>
        <th title="gym_dot">gym dot</th>
        <th title="perks_faction">fac</th>
        <th title="perks_property">pro</th>
        <th title="perks_education_stat">edu1</th>
        <th title="perks_education_all">edu2</th>
        <th title="perks_company">comp</th>
        <th title="perks_company_happy_red">comp happy</th>
      </tr>
  </thead>

  <tbody>
    {% for train in trains %}
    <tr>
      <td>{{train.pk}}</td>
      <td>{{train.id_key}}</td>
      <td title="{{train.timestamp|ts2date}}">{{train.timestamp}}</td>
      <td>{{train.time_diff}}</td>
      <td>{{train.happy_before}}</td>
      <td>{{train.happy_after}}</td>
      <td>{{train.happy_delta}}</td>
      <td>{{train.energy_used}}</td>
      <td>{{train.stat_type}}</td>
      <td>{{train.stat_before_cap|intcomma}}</td>
      <td>{{train.stat_after_cap|intcomma}}</td>
      <td>{{train.stat_delta|intcomma}}</td>
      <td>{{train.vladar_error|mul:100|floatformat:2}}%</td>
      <td>{{train.gym_id}}</td>
      <td>{{train.gym_dot}}</td>
      <td>{{train.perks_faction}}</td>
      <td>{{train.perks_property}}</td>
      <td>{{train.perks_education_stat}}</td>
      <td>{{train.perks_education_all}}</td>
      <td>{{train.perks_company}}</td>
      <td>{{train.perks_company_happy_red}}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</html>
